/* styles/Header.scss */
@use "../../../styles/mixins" as *;

.header-placeholder {
  height: 65px;
  /* Add safe area support for iPhone notch/Dynamic Island */
  padding-top: env(safe-area-inset-top);
  height: calc(65px + env(safe-area-inset-top));
  position: sticky;
  top: 0;
  z-index: 9999;
  width: 100%;
  background-color: $primary-color;
  transition: background-color 0.3s ease;

  &.header-placeholder--transparent {
    background-color: transparent;
  }

  /* Smaller header on mobile (Instagram-style ~48px) */
  @media (max-width: 768px) {
    height: 48px;
    height: calc(48px + env(safe-area-inset-top));
  }
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  /* Add safe area padding for iPhone notch/Dynamic Island */
  padding-top: calc(10px + env(safe-area-inset-top));
  padding-left: max(20px, env(safe-area-inset-left));
  padding-right: max(20px, env(safe-area-inset-right));
  background-color: $primary-color;
  position: fixed;
  width: 100%;
  top: 0;
  z-index: 10000;
  height: 65px;
  /* Total height including safe area */
  min-height: calc(65px + env(safe-area-inset-top));

  /* Smaller header on mobile (Instagram-style ~48px) */
  @media (max-width: 768px) {
    height: 48px;
    min-height: calc(48px + env(safe-area-inset-top));
    padding: 8px 12px;
    padding-top: calc(8px + env(safe-area-inset-top));
    padding-left: max(12px, env(safe-area-inset-left));
    padding-right: max(12px, env(safe-area-inset-right));
  }

  /* Add .flex class */
  .flex {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .logo {
    // margin-right: 5%;
    align-self: center;
    a {
      text-decoration: none;
      font-size: 24px;
      font-weight: bold;
      color: #f2ebeb;
    }
  }

  .header-back-button {
    background: none;
    border: none;
    color: #f2ebeb;
    cursor: pointer;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.2s ease;
    -webkit-tap-highlight-color: transparent;

    &:hover {
      opacity: 0.8;
    }

    &:active {
      opacity: 0.6;
    }

    svg {
      display: block;
    }
  }

  /* Centered logo when back button is shown (mobile) */
  .header-center-logo {
    position: absolute;
    left: 50%;
    /* Center in the content area below safe area, not entire header */
    bottom: 24px;
    transform: translate(-50%, 50%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
    transition: opacity 0.15s ease;
    -webkit-tap-highlight-color: transparent;
  }

  .main-nav {
    flex-grow: 2;
    margin-left: 20px;
    ul {
      display: flex;
      justify-content: space-between;
      align-items: center;
      justify-content: flex-start;
      list-style: none;
      gap: min(10%);

      a {
        text-decoration: none;
        color: #ffffff;
      }
    }
  }

  .auth-cart {
    display: flex;
    align-items: center;
    gap: 16px;

    .language-switcher-container {
      margin-right: 8px;
      display: flex;
      align-items: center;
    }

    a {
      white-space: nowrap;
      text-decoration: none;
      color: #ffffff;
    }
  }

  .mobile-nav-btn {
    display: none;
  }

  .shop-dropdown {
    position: relative;

    .shop-dropdown-menu {
      position: absolute;
      bottom: -70px;
      left: 0;
      background: $primary-color;
      min-width: 180px;
      border-radius: 0 0 8px 8px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 100;
      overflow: hidden;

      a {
        display: block;
        padding: 12px 20px;
        color: #ffffff; /* Match the same color as other header links */
        border-bottom: none;
        width: 100%;
        text-align: left;
        font-family: "firaGo", sans-serif; /* Use firaGo font */
        font-size: inherit; /* Inherit font size from parent */

        &:hover {
          background: rgba(255, 255, 255, 0.1); /* Subtle hover background */
          color: #e0d849; /* Change text color on hover to match other links */
        }
      }
    }

    &:hover .shop-dropdown-menu {
      opacity: 1;
      visibility: visible;
      // transform: translateY(0);
    }
  }

  .mobile-only-nav {
    display: none;
  }

  .mobile-header-actions {
    display: none;
  }

  /* Mobile responsiveness */
  @media (max-width: 900px) {
    .header {
      position: relative;
    }
    .desktop-only {
      display: none;
    }

    .mobile-header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .main-nav {
      display: none;
    }

    /* Mobile menu icon (Hamburger) */
    .mobile-nav-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      min-width: 44px;
      min-height: 44px;
      width: 44px;
      height: 44px;
      font-size: 20px;
      z-index: 1001;
      background: none;
      border: none;
      padding: 8px;
      position: relative;
    }

    .hamburger-icon {
      font-size: 24px;
      color: #ffffff;
      pointer-events: none;
    }
  }
}

// Mobile support for language switcher in burger menu
@media (max-width: 900px) {
  .mobile-language {
    > div {
      width: 100%;
    }
  }

  .mobile-cart {
    a {
      display: flex;
      align-items: center;
    }
  }
}

@media screen and (max-width: 768px) {
  .logo {
    img {
      max-height: 40px !important;
      width: auto !important;
    }
  }

  .header-center-logo {
    img {
      max-height: 40px !important;
      width: auto !important;
    }
  }

  .header-back-button {
    padding: 2px !important;
    
    svg {
      width: 24px;
      height: 24px;
    }
  }

  /* Bigger hamburger menu icon */
  .mobile-nav-btn {
    width: 36px !important;
    height: 36px !important;
  }

  .hamburger-icon {
    font-size: 26px !important;
  }
}
